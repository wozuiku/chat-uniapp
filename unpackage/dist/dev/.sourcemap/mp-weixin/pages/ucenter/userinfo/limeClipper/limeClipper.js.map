{"version":3,"sources":["webpack:////Users/xianxiaoge/Documents/HBuilderProjects/chat-uniapp/pages/ucenter/userinfo/limeClipper/limeClipper.vue?715d","webpack:////Users/xianxiaoge/Documents/HBuilderProjects/chat-uniapp/pages/ucenter/userinfo/limeClipper/limeClipper.vue?cd3a","webpack:////Users/xianxiaoge/Documents/HBuilderProjects/chat-uniapp/pages/ucenter/userinfo/limeClipper/limeClipper.vue?6638","webpack:////Users/xianxiaoge/Documents/HBuilderProjects/chat-uniapp/pages/ucenter/userinfo/limeClipper/limeClipper.vue?d6f9","uni-app:///pages/ucenter/userinfo/limeClipper/limeClipper.vue","webpack:////Users/xianxiaoge/Documents/HBuilderProjects/chat-uniapp/pages/ucenter/userinfo/limeClipper/limeClipper.vue?bd0f"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"+IAAA,yHACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,qDACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,8GAAu3B,eAAG,G,+HCiD13B,S,+WACA,S,EACA,CAEA,iBACA,OACA,OACA,aACA,YAGA,MACA,YACA,cAGA,aACA,aAEA,UACA,YACA,qBAEA,QACA,YACA,YAEA,UACA,aAEA,UACA,YACA,eAEA,SACA,YACA,WAEA,OACA,YACA,aAEA,QACA,YACA,aAEA,UACA,YACA,aAEA,UACA,YACA,aAEA,WACA,YACA,aAEA,WACA,YACA,aAEA,aACA,aACA,YAEA,cACA,aACA,YAEA,aACA,aACA,YAEA,YACA,YACA,WAEA,UACA,YACA,YAEA,UACA,YACA,WAEA,gBACA,aACA,YAEA,iBACA,aACA,YAEA,aACA,aACA,YAEA,gBACA,aACA,YAEA,iBACA,aACA,YAEA,kBACA,aACA,YAEA,iBACA,aACA,YAEA,aACA,YACA,YAEA,QACA,YACA,0BACA,eACA,YAEA,qBAKA,KA/HA,WAgIA,OACA,cACA,eACA,QACA,QACA,YACA,aACA,aACA,aACA,cACA,WACA,YACA,QACA,QACA,oBACA,WACA,mBACA,gBACA,oBACA,iBACA,gBACA,aACA,oBACA,0BACA,mBACA,WAGA,UACA,UADA,WACA,IACA,8EACA,+BACA,EADA,6BAEA,EAFA,2CAGA,kBAHA,0BAIA,EAJA,2BAKA,EALA,eAQA,WAXA,WAWA,IACA,iHACA,iCACA,gBADA,8BAEA,gBAFA,6CAGA,MAHA,eAGA,MAHA,wBAGA,EAHA,oBAGA,EAHA,+CAIA,QAJA,cAOA,SApBA,WAoBA,IACA,mCACA,kCAEA,UAxBA,WAwBA,IACA,0BACA,0BAGA,OACA,MADA,SACA,GACA,MAIA,yBACA,oDADA,EACA,aADA,EACA,cADA,EACA,YADA,EACA,WADA,EACA,QADA,EACA,QADA,EACA,QADA,EACA,YADA,EACA,aADA,EACA,KACA,cACA,yBAEA,6HARA,iBACA,cAcA,SAlBA,SAkBA,GACA,cAEA,OACA,iIACA,qBADA,0GAKA,SA3BA,YA2BA,+BACA,iCACA,KACA,KACA,KACA,gCAEA,KACA,iCAEA,qBAEA,MAvCA,SAuCA,GACA,kBACA,gBAFA,IAGA,mBACA,SACA,kBACA,4BAGA,gCAEA,UAlDA,SAkDA,cAEA,GADA,kCACA,GACA,6BACA,eACA,iBAEA,KACA,qCACA,wBAGA,YA9DA,SA8DA,GACA,IACA,eACA,kBACA,qCAGA,iCAGA,UAxEA,WAyEA,6BAEA,MA3EA,SA2EA,KACA,OACA,kBACA,iBAIA,OAlFA,SAkFA,KACA,OACA,kBACA,mBAKA,QAnRA,WAoRA,4BACA,eACA,mBACA,YACA,8BAEA,qBACA,oBACA,6BAEA,SACA,YADA,SACA,cACA,oCACA,cACA,eAIA,aARA,SAQA,cACA,IACA,YACA,eACA,eACA,UAGA,gBACA,MACA,oBACA,mCACA,eACA,gBACA,4BACA,oBALA,IAOA,qHACA,4HAEA,iBACA,mBACA,eACA,iCAMA,YArCA,WAqCA,IACA,0DACA,MACA,MACA,uBACA,sBACA,kBACA,mBACA,uCACA,iBACA,kBACA,aACA,aACA,oBACA,mBACA,iBACA,iBAEA,cAvDA,WAuDA,IACA,mFACA,2BACA,wBACA,uBACA,6BACA,8BACA,aACA,cAEA,aAjEA,WAiEA,IACA,4EACA,gBACA,kBACA,0BAEA,mBACA,kBACA,wBAGA,iBACA,kBACA,4BAEA,qBACA,4BACA,kBACA,2BAIA,qBAvFA,WAuFA,WACA,4EACA,aACA,KACA,yBAEA,oBACA,yCAGA,aACA,KACA,yBAEA,mBACA,wCAGA,uBACA,4BACA,uBACA,kBACA,QACA,eAEA,oBACA,IACA,KACA,oBACA,IACA,kBACA,6BAEA,qBACA,IACA,kBACA,+BAIA,eA/HA,SA+HA,YACA,+BADA,EACA,aADA,EACA,YACA,kBACA,oBAEA,wBApIA,SAoIA,GACA,qBACA,mCACA,qCAEA,2BAzIA,SAyIA,GACA,qBADA,OAEA,+BAFA,EAEA,QAFA,EAEA,OAFA,EAEA,IACA,kBACA,YACA,WACA,YAGA,SAlJA,WAmJA,kBACA,mBAGA,WAvJA,WAwJA,mCAEA,SA1JA,WA0JA,WACA,kCACA,6BACA,aACA,8BAEA,oBACA,KACA,sCAEA,eApKA,SAoKA,GAIA,eAOA,2BACA,uBACA,6DACA,wCACA,kBACA,IACA,gBACA,QACA,SACA,IACA,IACA,QACA,QACA,UAEA,sBACA,2BAtBA,aACA,cACA,eAsBA,cAjMA,SAiMA,GAKA,eAQA,yBAbA,IAiBA,yCACA,aACA,0DACA,oBACA,kBACA,kBAEA,gBACA,6CACA,UACA,yCACA,KAOA,EAKA,GACA,kBACA,aACA,UAPA,kBACA,YACA,UATA,kBACA,YACA,aACA,QACA,UAaA,uCAxCA,aACA,cACA,eA2CA,aApPA,WAqPA,gBACA,uBAEA,gBAxPA,SAwPA,GAIA,qBAJA,IAKA,iCACA,uBACA,uBAEA,KACA,wBACA,MACA,MACA,OAEA,yBACA,CACA,2BACA,uBACA,gBACA,gBACA,oCAEA,GACA,CACA,MACA,OAEA,CACA,MACA,QAGA,qBACA,0BAGA,eA7RA,SA6RA,OAIA,wCACA,UACA,2BACA,uBAIA,GAHA,oCACA,gBACA,kBACA,6BACA,4CADA,EACA,OADA,EACA,IACA,kBACA,YACA,aAEA,sCACA,CACA,2BACA,uBACA,gBACA,gBACA,oCACA,uCACA,oBAEA,KAEA,mCACA,mCACA,qBACA,wBACA,6BAIA,gCACA,6DACA,gBAGA,cAvUA,WAwUA,kBACA,kBAEA,iBAEA,YA7UA,WA6UA,WACA,8BACA,4BACA,kDACA,0BAEA,cACA,eACA,eACA,QACA,WACA,eACA,YAIA,cACA,sBACA,QACA,aACA,aAKA,WACA,mBACA,2CACA,qCACA,cAIA,YAGA,WAjXA,WAkXA,0CACA,aACA,aACA,+BACA,gCAEA,UAxXA,SAwXA,GACA,kBACA,gBACA,8BAEA,OA7XA,SA6XA,GACA,yBACA,eAFA,IASA,mBACA,aACA,+BAEA,WADA,YACA,IAEA,IAEA,qCAdA,aACA,cACA,eAcA,QAhZA,WAgZA,WACA,eAOA,eACA,cATA,IAWA,oQACA,aACA,uBACA,oBACA,MACA,MACA,qBACA,wBACA,6BACA,sBACA,UACA,MACA,GACA,IACA,IACA,QACA,SACA,YACA,aACA,WACA,WACA,UACA,oBACA,qBACA,gBACA,qBACA,qBAEA,iBACA,yBACA,kBACA,sBAIA,GACA,OACA,QACA,UAEA,gCAIA,cACA,mBACA,oBACA,SACA,2BACA,uBACA,MACA,SAGA,SA/DA,aACA,cACA,eAgEA,OApdA,WAqdA,wBACA,0B,2ECvyBA,8GAAwwC,eAAG,G","file":"pages/ucenter/userinfo/limeClipper/limeClipper.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./limeClipper.vue?vue&type=template&id=e2a6a4ae&scoped=true&\"\nvar renderjs\nimport script from \"./limeClipper.vue?vue&type=script&lang=js&\"\nexport * from \"./limeClipper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./limeClipper.vue?vue&type=style&index=0&id=e2a6a4ae&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e2a6a4ae\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/ucenter/userinfo/limeClipper/limeClipper.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./limeClipper.vue?vue&type=template&id=e2a6a4ae&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./limeClipper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./limeClipper.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"l-clipper\" :class=\"{open: value}\" disable-scroll :style=\"'z-index: ' + zIndex + ';' + customStyle\">\n\t\t<view class=\"l-clipper-mask\" @touchstart.stop.prevent=\"clipTouchStart\" @touchmove.stop.prevent=\"clipTouchMove\" @touchend.stop.prevent=\"clipTouchEnd\">\n\t\t\t<view class=\"l-clipper__content\" :style=\"clipStyle\"><view class=\"l-clipper__edge\" v-for=\"(item, index) in [0, 0, 0, 0]\" :key=\"index\"></view></view>\n\t\t</view>\n\t\t<image\n\t\t\tclass=\"l-clipper-image\"\n\t\t\t@error=\"imageLoad\"\n\t\t\t@load=\"imageLoad\"\n\t\t\t@touchstart.stop.prevent=\"imageTouchStart\"\n\t\t\t@touchmove.stop.prevent=\"imageTouchMove\"\n\t\t\t@touchend.stop.prevent=\"imageTouchEnd\"\n\t\t\t:src=\"image\"\n\t\t\t:mode=\"imageWidth == 'auto' ? 'widthFix' : ''\"\n\t\t\tv-if=\"image\"\n\t\t\t:style=\"imageStyle\"\n\t\t/>\n\t\t<canvas\n\t\t\t:canvas-id=\"canvasId\"\n\t\t\tid=\"l-clipper\"\n\t\t\tdisable-scroll\n\t\t\t:style=\"'width: ' + canvasWidth * scaleRatio + 'px; height:' + canvasHeight * scaleRatio + 'px;'\"\n\t\t\tclass=\"l-clipper-canvas\"\n\t\t></canvas>\n\t\t<view class=\"l-clipper-tools\">\n\t\t\t<view class=\"l-clipper-tools__btns\">\n\t\t\t\t<view v-if=\"isShowCancelBtn\" @tap=\"cancel\">\n\t\t\t\t\t<slot name=\"cancel\" v-if=\"$slots.cancel\" />\n\t\t\t\t\t<view v-else class=\"cancel\">取消</view>\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"isShowPhotoBtn\" @tap=\"uploadImage\">\n\t\t\t\t\t<slot name=\"photo\" v-if=\"$slots.photo\" />\n\t\t\t\t\t<image v-else src=\"@/static/limeClipper/photo.svg\" />\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"isShowRotateBtn\" @tap=\"rotate\">\n\t\t\t\t\t<slot name=\"rotate\" v-if=\"$slots.rotate\" />\n\t\t\t\t\t<image v-else src=\"@/static/limeClipper/rotate.svg\" data-type=\"inverse\" />\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"isShowConfirmBtn\" @tap=\"confirm\">\n\t\t\t\t\t<slot name=\"confirm\" v-if=\"$slots.confirm\" />\n\t\t\t\t\t<view v-else class=\"confirm\">确定</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<slot></slot>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { determineDirection, calcImageOffset, calcImageScale, calcImageSize, calcPythagoreanTheorem, clipTouchMoveOfCalculate, imageTouchMoveOfCalcOffset } from './utils';\nconst cache = {}\nexport default {\n\t// version: '0.6.3',\n\tname: 'l-clipper',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\t// #ifdef MP-WEIXIN\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: '2d'\n\t\t},\n\t\t// #endif\n\t\tcustomStyle: {\n\t\t\ttype: String,\n\t\t},\n\t\tcanvasId: {\n\t\t\ttype: String,\n\t\t\tdefault: 'l-clipper'\n\t\t},\n\t\tzIndex: {\n\t\t\ttype: Number,\n\t\t\tdefault: 99\n\t\t},\n\t\timageUrl: {\n\t\t\ttype: String\n\t\t},\n\t\tfileType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'png'\n\t\t},\n\t\tquality: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 400\n\t\t},\n\t\theight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 400\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 200\n\t\t},\n\t\tmaxWidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 600\n\t\t},\n\t\tminHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 200\n\t\t},\n\t\tmaxHeight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 600\n\t\t},\n\t\tisLockWidth: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tisLockHeight: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tisLockRatio: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tscaleRatio: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tminRatio: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0.5\n\t\t},\n\t\tmaxRatio: {\n\t\t\ttype: Number,\n\t\t\tdefault: 2\n\t\t},\n\t\tisDisableScale: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tisDisableRotate: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tisLimitMove: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tisShowPhotoBtn: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tisShowRotateBtn: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tisShowConfirmBtn: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tisShowCancelBtn: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\trotateAngle: {\n\t\t\ttype: Number,\n\t\t\tdefault: 90\n\t\t},\n\t\tsource: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\t\talbum: '从相册中选择',\n\t\t\t\t\tcamera: '拍照',\n\t\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\t\tmessage: '从微信中选择'\n\t\t\t\t\t// #endif\n\t\t\t\t})\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasWidth: 0,\n\t\t\tcanvasHeight: 0,\n\t\t\tclipX: 0,\n\t\t\tclipY: 0,\n\t\t\tclipWidth: 0,\n\t\t\tclipHeight: 0,\n\t\t\tanimation: false,\n\t\t\timageWidth: 0,\n\t\t\timageHeight: 0,\n\t\t\timageTop: 0,\n\t\t\timageLeft: 0,\n\t\t\tscale: 1,\n\t\t\tangle: 0,\n\t\t\timage: this.imageUrl,\n\t\t\tsysinfo: {},\n\t\t\tthrottleTimer: null,\n\t\t\tthrottleFlag: true,\n\t\t\ttimeClipCenter: null,\n\t\t\tflagClipTouch: false,\n\t\t\tflagEndTouch: false,\n\t\t\tclipStart: {},\n\t\t\tanimationTimer: null,\n\t\t\ttouchRelative: [{x: 0,y: 0}],\n\t\t\thypotenuseLength: 0,\n\t\t\tctx: null\n\t\t};\n\t},\n\tcomputed: {\n\t\tclipStyle() {\n\t\t\tconst {clipWidth, clipHeight, clipY, clipX, animation} = this\n\t\t\treturn  `\n\t\t\twidth: ${clipWidth}px;\n\t\t\theight:${clipHeight}px;\n\t\t\ttransition-property: ${animation ? '' : 'background'};\n\t\t\tleft: ${clipX}px;\n\t\t\ttop: ${clipY}px\n\t\t\t`\n\t\t},\n\t\timageStyle() {\n\t\t\tconst {imageWidth, imageHeight, imageLeft, imageTop, animation, scale, angle} = this\n\t\t\treturn `\n\t\t\t\twidth: ${imageWidth ? imageWidth + 'px' : 'auto'};\n\t\t\t\theight: ${imageHeight ? imageHeight + 'px' : 'auto'};\n\t\t\t\ttransform: translate3d(${imageLeft - imageWidth / 2}px, ${imageTop - imageHeight / 2}px, 0) scale(${scale}) rotate(${angle}deg);\n\t\t\t\ttransition-duration: ${animation ? 0.35 : 0}s\n\t\t\t`\n\t\t},\n\t\tclipSize() {\n\t\t\tconst { clipWidth, clipHeight } = this;\n\t\t\treturn { clipWidth, clipHeight };\n\t\t},\n\t\tclipPoint() {\n\t\t\tconst { clipY, clipX } = this;\n\t\t\treturn { clipY, clipX };\n\t\t}\n\t},\n\twatch: {\n\t\tvalue(val) {\n\t\t\tif(!val) {\n\t\t\t\tthis.animation = 0\n\t\t\t\tthis.angle = 0\n\t\t\t} else {\n\t\t\t\tif(this.imageUrl) {\n\t\t\t\t\tconst {imageWidth, imageHeight, imageLeft, imageTop, scale, clipX, clipY, clipWidth, clipHeight, path} = cache?.[this.imageUrl] || {}\n\t\t\t\t\tif(path != this.image) {\n\t\t\t\t\t\tthis.image = this.imageUrl;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setDiffData({imageWidth, imageHeight, imageLeft, imageTop, scale, clipX, clipY, clipWidth, clipHeight})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\timageUrl(url) {\n\t\t\tthis.image = url\n\t\t},\n\t\timage:{\n\t\t\thandler: async function(url) {\n\t\t\t\tthis.getImageInfo(url)\n\t\t\t},\n\t\t\t// immediate: true,\n\t\t},\n\t\tclipSize({ widthVal, heightVal }) {\n\t\t\tlet { minWidth, minHeight } = this;\n\t\t\tminWidth = minWidth / 2;\n\t\t\tminHeight = minHeight / 2;\n\t\t\tif (widthVal < minWidth) {\n\t\t\t\tthis.setDiffData({clipWidth: minWidth})\n\t\t\t}\n\t\t\tif (heightVal < minHeight) {\n\t\t\t\tthis.setDiffData({clipHeight: minHeight})\n\t\t\t}\n\t\t\tthis.calcClipSize();\n\t\t},\n\t\tangle(val) {\n\t\t\tthis.animation = true;\n\t\t\tthis.moveStop();\n\t\t\tconst { isLimitMove } = this;\n\t\t\tif (isLimitMove && val % 90) {\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tangle: Math.round(val / 90) * 90\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.imgMarginDetectionScale();\n\t\t},\n\t\tanimation(val) {\n\t\t\tclearTimeout(this.animationTimer);\n\t\t\tif (val) {\n\t\t\t\tlet animationTimer = setTimeout(() => {\n\t\t\t\t\tthis.setDiffData({\n\t\t\t\t\t\tanimation: false\n\t\t\t\t\t})\n\t\t\t\t}, 260);\n\t\t\t\tthis.setDiffData({animationTimer})\n\t\t\t\tthis.animationTimer = animationTimer;\n\t\t\t}\n\t\t},\n\t\tisLimitMove(val) {\n\t\t\tif (val) {\n\t\t\t\tif (this.angle % 90) {\n\t\t\t\t\tthis.setDiffData({\n\t\t\t\t\t\tangle : Math.round(this.angle / 90) * 90\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.imgMarginDetectionScale();\n\t\t\t}\n\t\t},\n\t\tclipPoint() {\n\t\t\tthis.cutDetectionPosition();\n\t\t},\n\t\twidth(width, oWidth) {\n\t\t\tif (width !== oWidth) {\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipWidth:  width / 2\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\theight(height, oHeight) {\n\t\t\tif (height !== oHeight) {\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipHeight:  height / 2\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tconst sysinfo = uni.getSystemInfoSync();\n\t\tthis.sysinfo = sysinfo;\n\t\tthis.setClipInfo();\n\t\tif(this.image) {\n\t\t\tthis.getImageInfo(this.image)\n\t\t}\n\t\tthis.setClipCenter();\n\t\tthis.calcClipSize();\n\t\tthis.cutDetectionPosition();\n\t},\n\tmethods: {\n\t\tsetDiffData(data) {\n\t\t\tObject.keys(data).forEach(key => {\n\t\t\t  if (this[key] !== data[key]) {\n\t\t\t\tthis[key] = data[key];\n\t\t\t  }\n\t\t\t});\n\t\t},\n\t\tgetImageInfo(url) {\n\t\t\tif (!url) return;\n\t\t\tif(this.value) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '请稍候...',\n\t\t\t\t\tmask: true\n\t\t\t\t});\n\t\t\t}\n\t\t\tuni.getImageInfo({\n\t\t\t\tsrc: url,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.imgComputeSize(res.width, res.height);\n\t\t\t\t\tthis.image = res.path;\n\t\t\t\t\tif (this.isLimitMove) {\n\t\t\t\t\t\tthis.imgMarginDetectionScale();\n\t\t\t\t\t\tthis.$emit('ready', res);\n\t\t\t\t\t}\n\t\t\t\t\tconst {imageWidth, imageHeight, imageLeft, imageTop, scale, clipX, clipY, clipWidth, clipHeight} = this\n\t\t\t\t\tcache[url] = Object.assign(res, {imageWidth, imageHeight, imageLeft, imageTop, scale, clipX, clipY, clipWidth, clipHeight});\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tthis.imgComputeSize();\n\t\t\t\t\tif (this.isLimitMove) {\n\t\t\t\t\t\tthis.imgMarginDetectionScale();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t},\n\t\tsetClipInfo() {\n\t\t\tconst { width, height, sysinfo, canvasId } = this;\n\t\t\tconst clipWidth = width / 2;\n\t\t\tconst clipHeight = height / 2;\n\t\t\tconst clipY = (sysinfo.windowHeight - clipHeight) / 2;\n\t\t\tconst clipX = (sysinfo.windowWidth - clipWidth) / 2;\n\t\t\tconst imageLeft = sysinfo.windowWidth / 2;\n\t\t\tconst imageTop = sysinfo.windowHeight / 2;\n\t\t\tthis.ctx = uni.createCanvasContext(canvasId, this);\n\t\t\tthis.clipWidth = clipWidth;\n\t\t\tthis.clipHeight = clipHeight;\n\t\t\tthis.clipX = clipX;\n\t\t\tthis.clipY = clipY;\n\t\t\tthis.canvasHeight = clipHeight;\n\t\t\tthis.canvasWidth = clipWidth;\n\t\t\tthis.imageLeft = imageLeft;\n\t\t\tthis.imageTop = imageTop;\n\t\t},\n\t\tsetClipCenter() {\n\t\t\tconst { sysInfo, clipHeight, clipWidth, imageTop, imageLeft } = this;\n\t\t\tlet sys = sysInfo || uni.getSystemInfoSync();\n\t\t\tlet clipY = (sys.windowHeight - clipHeight) * 0.5;\n\t\t\tlet clipX = (sys.windowWidth - clipWidth) * 0.5;\n\t\t\tthis.imageTop = imageTop - this.clipY + clipY;\n\t\t\tthis.imageLeft = imageLeft - this.clipX + clipX;\n\t\t\tthis.clipY = clipY;\n\t\t\tthis.clipX = clipX;\n\t\t},\n\t\tcalcClipSize() {\n\t\t\tconst { clipHeight, clipWidth, sysinfo, clipX, clipY } = this;\n\t\t\tif (clipWidth > sysinfo.windowWidth) {\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipWidth:  sysinfo.windowWidth\n\t\t\t\t})\n\t\t\t} else if (clipWidth + clipX > sysinfo.windowWidth) {\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipX: sysinfo.windowWidth - clipX\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (clipHeight > sysinfo.windowHeight) {\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipHeight: sysinfo.windowHeight\n\t\t\t\t})\n\t\t\t} else if (clipHeight + clipY > sysinfo.windowHeight) {\n\t\t\t\tthis.clipY = sysinfo.windowHeight - clipY;\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipY: sysinfo.windowHeight - clipY\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcutDetectionPosition() {\n\t\t\tconst { clipX, clipY, sysinfo, clipHeight, clipWidth } = this;\n\t\t\tlet cutDetectionPositionTop = () => {\n\t\t\t\t\tif (clipY < 0) {\n\t\t\t\t\t\tthis.setDiffData({clipY: 0})\n\t\t\t\t\t}\n\t\t\t\t\tif (clipY > sysinfo.windowHeight - clipHeight) {\n\t\t\t\t\t\tthis.setDiffData({clipY: sysinfo.windowHeight - clipHeight})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcutDetectionPositionLeft = () => {\n\t\t\t\t\tif (clipX < 0) {\n\t\t\t\t\t\tthis.setDiffData({clipX: 0})\n\t\t\t\t\t}\n\t\t\t\t\tif (clipX > sysinfo.windowWidth - clipWidth) {\n\t\t\t\t\t\tthis.setDiffData({clipX: sysinfo.windowWidth - clipWidth})\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tif (clipY === null && clipX === null) {\n\t\t\t\tlet newClipY = (sysinfo.windowHeight - clipHeight) * 0.5;\n\t\t\t\tlet newClipX = (sysinfo.windowWidth - clipWidth) * 0.5;\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipX: newClipX,\n\t\t\t\t\tclipY: newClipY\n\t\t\t\t})\n\t\t\t} else if (clipY !== null && clipX !== null) {\n\t\t\t\tcutDetectionPositionTop();\n\t\t\t\tcutDetectionPositionLeft();\n\t\t\t} else if (clipY !== null && clipX === null) {\n\t\t\t\tcutDetectionPositionTop();\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipX: (sysinfo.windowWidth - clipWidth) / 2\n\t\t\t\t})\n\t\t\t} else if (clipY === null && clipX !== null) {\n\t\t\t\tcutDetectionPositionLeft();\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tclipY: (sysinfo.windowHeight - clipHeight) / 2\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\timgComputeSize(width, height) {\n\t\t\tconst { imageWidth, imageHeight } = calcImageSize(width, height, this);\n\t\t\tthis.imageWidth = imageWidth;\n\t\t\tthis.imageHeight = imageHeight;\n\t\t},\n\t\timgMarginDetectionScale(scale) {\n\t\t\tif (!this.isLimitMove) return;\n\t\t\tconst currentScale = calcImageScale(this, scale);\n\t\t\tthis.imgMarginDetectionPosition(currentScale);\n\t\t},\n\t\timgMarginDetectionPosition(scale) {\n\t\t\tif (!this.isLimitMove) return;\n\t\t\tconst { scale: currentScale, left, top } = calcImageOffset(this, scale);\n\t\t\tthis.setDiffData({\n\t\t\t\timageLeft: left,\n\t\t\t\timageTop: top,\n\t\t\t\tscale: currentScale\n\t\t\t})\n\t\t},\n\t\tthrottle() {\n\t\t\tthis.setDiffData({\n\t\t\t\tthrottleFlag: true\n\t\t\t})\n\t\t},\n\t\tmoveDuring() {\n\t\t\tclearTimeout(this.timeClipCenter);\n\t\t},\n\t\tmoveStop() {\n\t\t\tclearTimeout(this.timeClipCenter);\n\t\t\tconst timeClipCenter = setTimeout(() => {\n\t\t\t\tif (!this.animation) {\n\t\t\t\t\tthis.setDiffData({animation: true})\n\t\t\t\t}\n\t\t\t\tthis.setClipCenter();\n\t\t\t}, 800);\n\t\t\tthis.setDiffData({timeClipCenter})\n\t\t},\n\t\tclipTouchStart(event) {\n\t\t\t// #ifdef H5\n\t\t\tevent.preventDefault()\n\t\t\t// #endif\n\t\t\tif (!this.image) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择图片',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst currentX = event.touches[0].clientX;\n\t\t\tconst currentY = event.touches[0].clientY;\n\t\t\tconst { clipX, clipY, clipWidth, clipHeight } = this;\n\t\t\tconst corner = determineDirection(clipX, clipY, clipWidth, clipHeight, currentX, currentY);\n\t\t\tthis.moveDuring();\n\t\t\tif(!corner) {return}\n\t\t\tthis.clipStart = {\n\t\t\t\twidth: clipWidth,\n\t\t\t\theight: clipHeight,\n\t\t\t\tx: currentX,\n\t\t\t\ty: currentY,\n\t\t\t\tclipY,\n\t\t\t\tclipX,\n\t\t\t\tcorner\n\t\t\t};\n\t\t\tthis.flagClipTouch = true;\n\t\t\tthis.flagEndTouch = true;\n\t\t},\n\t\tclipTouchMove(event) {\n\t\t\t// #ifdef H5\n\t\t\tevent.stopPropagation()\n\t\t\tevent.preventDefault()\n\t\t\t// #endif\n\t\t\tif (!this.image) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择图片',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 只针对单指点击做处理\n\t\t\tif (event.touches.length !== 1) {\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\tconst { flagClipTouch, throttleFlag } = this;\n\t\t\tif (flagClipTouch && throttleFlag) {\n\t\t\t\tconst { isLockRatio, isLockHeight, isLockWidth } = this;\n\t\t\t\tif (isLockRatio && (isLockWidth || isLockHeight)) return;\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\tthrottleFlag: false\n\t\t\t\t})\n\t\t\t\tthis.throttle();\n\t\t\t\tconst clipData = clipTouchMoveOfCalculate(this, event);\n\t\t\t\tif(clipData) {\n\t\t\t\t\tconst { width, height, clipX, clipY } = clipData;\n\t\t\t\t\tif (!isLockWidth && !isLockHeight) {\n\t\t\t\t\t\tthis.setDiffData({\n\t\t\t\t\t\t\tclipWidth: width,\n\t\t\t\t\t\t\tclipHeight: height,\n\t\t\t\t\t\t\tclipX,\n\t\t\t\t\t\t\tclipY\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (!isLockWidth) {\n\t\t\t\t\t\tthis.setDiffData({\n\t\t\t\t\t\t\tclipWidth: width,\n\t\t\t\t\t\t\tclipX\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (!isLockHeight) {\n\t\t\t\t\t\tthis.setDiffData({\n\t\t\t\t\t\t\tclipHeight: height,\n\t\t\t\t\t\t\tclipY\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tthis.imgMarginDetectionScale();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\t\tclipTouchEnd() {\n\t\t\tthis.moveStop();\n\t\t\tthis.flagClipTouch = false;\n\t\t},\n\t\timageTouchStart(e) {\n\t\t\t// #ifdef H5\n\t\t\tevent.preventDefault()\n\t\t\t// #endif\n\t\t\tthis.flagEndTouch = false;\n\t\t\tconst { imageLeft, imageTop } = this;\n\t\t\tconst clientXForLeft = e.touches[0].clientX;\n\t\t\tconst clientYForLeft = e.touches[0].clientY;\n\n\t\t\tlet touchRelative = [];\n\t\t\tif (e.touches.length === 1) {\n\t\t\t\ttouchRelative[0] = {\n\t\t\t\t\tx: clientXForLeft - imageLeft,\n\t\t\t\t\ty: clientYForLeft - imageTop\n\t\t\t\t};\n\t\t\t\tthis.touchRelative = touchRelative;\n\t\t\t} else {\n\t\t\t\tconst clientXForRight = e.touches[1].clientX;\n\t\t\t\tconst clientYForRight = e.touches[1].clientY;\n\t\t\t\tlet width = Math.abs(clientXForLeft - clientXForRight);\n\t\t\t\tlet height = Math.abs(clientYForLeft - clientYForRight);\n\t\t\t\tconst hypotenuseLength = calcPythagoreanTheorem(width, height);\n\n\t\t\t\ttouchRelative = [\n\t\t\t\t\t{\n\t\t\t\t\t\tx: clientXForLeft - imageLeft,\n\t\t\t\t\t\ty: clientYForLeft - imageTop\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tx: clientXForRight - imageLeft,\n\t\t\t\t\t\ty: clientYForRight - imageTop\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\tthis.touchRelative = touchRelative;\n\t\t\t\tthis.hypotenuseLength = hypotenuseLength;\n\t\t\t}\n\t\t},\n\t\timageTouchMove(e) {\n\t\t\t// #ifdef H5\n\t\t\tevent.preventDefault()\n\t\t\t// #endif\n\t\t\tconst { flagEndTouch, throttleFlag } = this;\n\t\t\tif (flagEndTouch || !throttleFlag) return;\n\t\t\tconst clientXForLeft = e.touches[0].clientX;\n\t\t\tconst clientYForLeft = e.touches[0].clientY;\n\t\t\tthis.setDiffData({throttleFlag: false})\n\t\t\tthis.throttle();\n\t\t\tthis.moveDuring();\n\t\t\tif (e.touches.length === 1) {\n\t\t\t\tconst { left: imageLeft, top:  imageTop} = imageTouchMoveOfCalcOffset(this, clientXForLeft, clientYForLeft);\n\t\t\t\tthis.setDiffData({\n\t\t\t\t\timageLeft,\n\t\t\t\t\timageTop\n\t\t\t\t})\n\t\t\t\tthis.imgMarginDetectionPosition();\n\t\t\t} else {\n\t\t\t\tconst clientXForRight = e.touches[1].clientX;\n\t\t\t\tconst clientYForRight = e.touches[1].clientY;\n\t\t\t\tlet width = Math.abs(clientXForLeft - clientXForRight),\n\t\t\t\t\theight = Math.abs(clientYForLeft - clientYForRight),\n\t\t\t\t\thypotenuse = calcPythagoreanTheorem(width, height),\n\t\t\t\t\tscale = this.scale * (hypotenuse / this.hypotenuseLength);\n\t\t\t\tif (this.isDisableScale) {\n\n\t\t\t\t\tscale = 1;\n\t\t\t\t} else {\n\t\t\t\t\tscale = scale <= this.minRatio ? this.minRatio : scale;\n\t\t\t\t\tscale = scale >= this.maxRatio ? this.maxRatio : scale;\n\t\t\t\t\tthis.$emit('change', {\n\t\t\t\t\t\twidth: this.imageWidth * scale,\n\t\t\t\t\t\theight: this.imageHeight * scale\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.imgMarginDetectionScale(scale);\n\t\t\t\tthis.hypotenuseLength = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n\t\t\t\tthis.scale = scale;\n\t\t\t}\n\t\t},\n\t\timageTouchEnd() {\n\t\t\tthis.setDiffData({\n\t\t\t\tflagEndTouch: true\n\t\t\t})\n\t\t\tthis.moveStop();\n\t\t},\n\t\tuploadImage() {\n\t\t\tconst itemList = Object.entries(this.source)\n\t\t\tconst sizeType = ['original', 'compressed']\n\t\t\tconst success = ({tempFilePaths:a, tempFiles: b}) => {\n\t\t\t\tthis.image = a ? a[0] : b[0].path\n\t\t\t};\n\t\t\tconst _uploadImage = (type) => {\n\t\t\t\tif(type !== 'message') {\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tsizeType,\n\t\t\t\t\t\tsourceType: [type],\n\t\t\t\t\t\tsuccess\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// #ifdef MP-WEIXIN\n\t\t\t\tif(type == 'message') {\n\t\t\t\t\twx.chooseMessageFile({\n\t\t\t\t\t  count: 1,\n\t\t\t\t\t  type: 'image',\n\t\t\t\t\t  success\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t}\n\t\t\tif(itemList.length > 1) {\n\t\t\t\tuni.showActionSheet({\n\t\t\t\t\titemList: itemList.map(v => v[1]),\n\t\t\t\t\tsuccess: ({tapIndex: i}) => {\n\t\t\t\t\t\t_uploadImage(itemList[i][0])\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t_uploadImage(itemList[0][0])\n\t\t\t}\n\t\t},\n\t\timageReset() {\n\t\t\tconst sys = this.sysinfo || uni.getSystemInfoSync();\n\t\t\tthis.scale = 1;\n\t\t\tthis.angle = 0;\n\t\t\tthis.imageTop = sys.windowHeight / 2;\n\t\t\tthis.imageLeft = sys.windowWidth / 2;\n\t\t},\n\t\timageLoad(e) {\n\t\t\tthis.imageReset();\n\t\t\tuni.hideLoading();\n\t\t\tthis.$emit('ready', e.detail);\n\t\t},\n\t\trotate(event) {\n\t\t\tif (this.isDisableRotate) return;\n\t\t\tif (!this.image) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择图片',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { rotateAngle } = this;\n\t\t\tconst originAngle = this.angle\n\t\t\tconst type = event.currentTarget.dataset.type;\n\t\t\tif (type === 'along') {\n\t\t\t\tthis.angle = originAngle + rotateAngle\n\t\t\t} else {\n\t\t\t\tthis.angle = originAngle - rotateAngle\n\t\t\t}\n\t\t\tthis.$emit('rotate', this.angle);\n\t\t},\n\t\tconfirm() {\n\t\t\tif (!this.image) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请选择图片',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '加载中'\n\t\t\t});\n\t\t\tconst { canvasHeight, canvasWidth, clipHeight, clipWidth, ctx, scale, imageLeft, imageTop, clipX, clipY, angle, scaleRatio: dpr, image, quality, fileType, type: imageType, canvasId } = this;\n\t\t\tconst draw = () => {\n\t\t\t\tconst imageWidth = this.imageWidth * scale * dpr;\n\t\t\t\tconst imageHeight = this.imageHeight * scale * dpr;\n\t\t\t\tconst xpos = imageLeft - clipX;\n\t\t\t\tconst ypos = imageTop - clipY;\n\t\t\t\tctx.translate(xpos * dpr, ypos * dpr);\n\t\t\t\tctx.rotate((angle * Math.PI) / 180);\n\t\t\t\tctx.drawImage(image, -imageWidth / 2, -imageHeight / 2, imageWidth, imageHeight);\n\t\t\t\tctx.draw(false, () => {\n\t\t\t\t\tconst width = clipWidth * dpr\n\t\t\t\t\tconst height = clipHeight * dpr\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight,\n\t\t\t\t\t\tdestWidth: width,\n\t\t\t\t\t\tdestHeight: height,\n\t\t\t\t\t\tcanvasId: canvasId,\n\t\t\t\t\t\tfileType,\n\t\t\t\t\t\tquality,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tdata.url = res.tempFilePath;\n\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\tthis.$emit('success', data);\n\t\t\t\t\t\t\tthis.$emit('input', false)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\t\tconsole.error('error', error)\n\t\t\t\t\t\t\tthis.$emit('fail', error);\n\t\t\t\t\t\t\tthis.$emit('input', false)\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\turl: '',\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight\n\t\t\t\t\t};\n\t\t\t\t\tuni.canvasToTempFilePath(params, this)\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif (canvasWidth !== clipWidth || canvasHeight !== clipHeight) {\n\t\t\t\tthis.canvasWidth = clipWidth;\n\t\t\t\tthis.canvasHeight = clipHeight;\n\t\t\t\tctx.draw();\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tdraw();\n\t\t\t\t\t}, 100);\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tdraw();\n\t\t\t}\n\t\t},\n\t\tcancel() {\n\t\t\tthis.$emit('cancel', false)\n\t\t\tthis.$emit('input', false)\n\t\t},\n\t}\n};\n</script>\n\n<style scoped>\n@import './index'\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./limeClipper.vue?vue&type=style&index=0&id=e2a6a4ae&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./limeClipper.vue?vue&type=style&index=0&id=e2a6a4ae&scoped=true&lang=css&\""],"sourceRoot":""}